# RealTrans - 실시간 게임 음성 번역 및 Gemini 응답 생성 도우미

실시간 게임 플레이 중, PC 사운드 출력 장치에서 나오는 다른 플레이어들의 다양한 외국어 음성 대화를 캡처하여 한국어로 번역하고, Google Gemini AI를 통해 적절한 응답을 생성해주는 Windows 데스크톱 애플리케이션입니다.

## 주요 기능

- **실시간 오디오 캡처**: PC 사운드 출력 장치에서 나오는 시스템 전체 오디오 스트림을 캡처합니다.
- **음성 감지 및 언어 식별**: 감지된 오디오 스트림에서 사람의 음성만을 식별하고 언어를 감지합니다.
- **한국어 필터링**: 감지된 음성이 한국어일 경우 처리 과정에서 제외합니다.
- **음성 인식**: 외국어 음성을 텍스트로 변환합니다.
- **기계 번역**: 식별된 외국어 텍스트를 한국어 텍스트로 번역합니다.
- **Gemini 응답 생성**: Google Gemini AI를 사용하여 대화 맥락에 맞는 적절한 응답을 생성합니다.
- **오버레이 UI**: 게임 플레이 중에도 쉽게 볼 수 있는 항상 위에 표시되는 UI를 제공합니다.

## 시스템 요구사항

- **운영체제**: Windows 10 / 11
- **하드웨어**: NVIDIA GPU 권장
- **필수 소프트웨어**: 
  - Python 3.8 이상
  - NVIDIA CUDA Toolkit (12.8 권장, 12.1 또는 11.8도 지원)
- **API 키**: Google Gemini API 키 필요 (https://ai.google.dev/ 에서 무료로 발급 가능)

## 설치 방법

1. 저장소 클론:
   ```
   git clone https://github.com/yourusername/realtrans.git
   cd realtrans
   ```

2. 가상 환경 생성 및 활성화:
   ```
   python -m venv venv
   .\venv\Scripts\activate
   ```

3. 기본 의존성 패키지 설치:
   ```
   pip install -r requirements.txt
   ```
   이 명령은 `--extra-index-url`을 통해 CUDA 12.8용 PyTorch를 자동으로 설치합니다.

4. CUDA 설정 확인 및 맞춤 설치 (선택사항):
   ```
   python setup_gpu.py
   ```
   이 스크립트는 CUDA 설치를 확인하고 필요한 경우 다양한 CUDA 버전에 맞게 PyTorch를 설치할 수 있는 옵션을 제공합니다.

5. Gemini API 키 설정 (두 가지 방법):
   - 환경 변수 설정: `GEMINI_API_KEY=your_api_key_here`
   - 또는 애플리케이션 내 직접 입력 (실행 후 설정 UI에서 입력)

## 사용 방법

1. 애플리케이션 실행:
   ```
   python main.py
   ```

2. Gemini API 키 설정: 환경 변수로 설정하지 않았다면 UI에서 API 키를 입력하고 "설정" 버튼을 클릭합니다.

3. 오디오 소스 선택: 드롭다운 메뉴에서 게임 오디오가 출력되는 장치를 선택합니다.

4. 번역 시작: "번역 시작" 버튼을 클릭하여 실시간 번역을 시작합니다.

5. 번역 및 응답 확인: 외국어 음성이 감지되면 다음 정보가 화면에 표시됩니다:
   - 원본 외국어 텍스트 및 한국어 번역
   - Gemini가 생성한 한국어 응답
   - 응답의 외국어 번역
   - 외국어 발음 가이드 (한글)

6. 항상 위에 표시: "항상 위에 표시" 체크박스를 사용하여 게임 플레이 중에도 번역 결과를 볼 수 있습니다.

## 주요 구성 요소

- **오디오 캡처**: Windows WASAPI 기반 라이브러리 (soundcard, pyaudio)
- **음성 활성 탐지 (VAD)**: Silero VAD (PyTorch 기반)
- **음성 인식 및 언어 식별**: Faster Whisper v1.1.1 (CTranslate2 기반)
- **기계 번역**: NLLB (No Language Left Behind) 모델 + CTranslate2 v4.6.0
- **응답 생성**: Google Gemini 2.5 Flash API
- **오디오 처리**: librosa, resampy
- **UI**: PySide6 (Qt for Python)

## 프라이버시 참고 사항

- 이 애플리케이션은 시스템 오디오를 캡처하여 외부 API로 전송합니다.
- 캡처된 오디오는 음성 구간만 추출되어 처리됩니다.
- Gemini API로 전송되는 데이터는 Google의 개인정보 처리방침을 따릅니다.
- 민감한 정보가 포함된 오디오를 처리할 때는 주의하세요.

## 라이센스

이 프로젝트는 MIT 라이센스 하에 배포됩니다. 자세한 내용은 LICENSE 파일을 참조하세요.

## 기여하기

버그 리포트, 기능 제안, 풀 리퀘스트 등 모든 기여를 환영합니다.

## 면책 조항

이 프로젝트는 학습 및 개인 사용 목적으로 개발되었습니다. 번역 및 음성 인식 결과의 정확성은 완벽하지 않을 수 있습니다. 중요한 의사소통에는 전문 번역 서비스를 이용하시기 바랍니다.
